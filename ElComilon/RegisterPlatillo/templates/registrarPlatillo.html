{% extends "HeaderFooter/base-sidebar.html"%}
{% load static %}

{% block content%}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/style-registrop.css' %}">
    <title>Registrar Platillo</title>
</head>

<body>
    <main>
        <section class="cuadrado sombra">
            <div class="titulo">
                <h1>Registrar Nuevo Platillo</h1>
            </div>
            <form action="" autocomplete="off" method="post" class="formulario needs-validation" enctype=multipart/form-data validate novalidate>
                {% csrf_token %}
                <div class="itemsIzquierda">
                    <div class="campos">
                        <div class="inputs mb-4">
                            <div class="form-floating">
                                <input type="text" minlength="4" maxlength="30" pattern="^[a-zA-Z]+$" id="Nombre" name="Nombre" class="form-control inputfocus" placeholder=" "
                                required>
                                <label for="Nombre">Nombre del platillo</label>
                                <div class="valid-feedback"> </div>
                                <div class="invalid-feedback">Complete el campo</div>
                            </div>                  
    
                        </div>
    
                        <div class="inputs mb-4">
                            <div class="form-floating">
                                <input type="text" minlength="4" maxlength="50"  id="Ingredientes" name="Ingredientes" class="form-control inputfocus" placeholder=" "
                                required>
                                <label for="">Ingredientes</label>
                                <div class="valid-feedback"> </div>
                                <div class="invalid-feedback">Complete el campo</div>
                            </div>
                        </div>
                        <div class="inputs mb-4">
                            <div class="form-floating">
                                <input type="number"  min="100"  max="999999" id="Valor" name="Valor" placeholder="Valor" class="form-control inputfocus" required>
                                <label for="">Valor</label>
                                <div class="valid-feedback"> </div>
                                <div class="invalid-feedback">Complete los campos</div>                            
                            </div>
                        </div>
                        <div class="inputs mb-4">
                            <div class="form-floating">
                                <select min="1" id="disabledSelect" name="restaurante" class="form-select inputfocus" required>
                                    <option disabled selected value="">Seleccionar</option>
                                    {% for c in Restaurante %}
                                    <option value="{{ c.0 }}">{{ c.1 }}</option>
                                    {% endfor %}
                                </select>
                                <label for="">Seleccione un Restaurante</label>
                                <div class="valid-feedback"> </div>
                                <div class="invalid-feedback">Seleccione un restaurante</div>
                                {{ mensaje }}
                            </div>
                        </div>
                        <div class="inputs mb-4" id="divFileUpload">
                            <div class="input-group mb-3">
                                <input type="file" name="foto" id="file" accept="image/png,image/jpeg,image/bmp,image/gif" class="form-control inputfocus" required>
                                <div class="valid-feedback"> </div>
                                <div class="invalid-feedback">Inserte una imagen</div>
                            </div>
                        </div>    
                        <div class="form-check form-switch inputs check">
                            <input class="form-check-input" type="checkbox" name="Disponible" role="switch" id="flexSwitchCheckDefault">
                            <label class="form-check-label" for="flexSwitchCheckDefault">Disponible</label>
                          </div>
                                            
                    </div>
                    <div class="imagen-botones">
                        <h3 class="titlulo-vista-previa">Tu plato se verá así en el menú  </h3>
                        <div class="card platillo" style="width: 20rem; height: 20rem;">
                            <div id="preview">
                            </div>
                            <div class="card-body d-flex flex-column text-center justify-content-center">
                              <h5 id="previaNombre" class="card-title platillo__nombre"></h5>
                              <p id="previaIngredientes" class="card-text platillo__descripcion"></p>
                              <hr class="separacion">
                              <div class="precio-signo">
                                <h6>$</h6><h6 id="previaValor" class="card-subtitle mb-2  platillo__precio"></h6>   
                              </div>
                            </div>
                          </div>
                        <div class="multimedia">
                            
                            
                        </div>
                    </div>
                </div>
                <div class="botones">
                    <button type="submit" class="btn btn-aceptar" onClick="alertaExito()">Registrar</button>
                </div>
            </form> 
        </section>

    </main>
    <script src="{% static 'app/foto.js'%}"></script>
    <script src="{% static 'app/validar-form.js'%}"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script>
    <script src="{% static 'app/vista-previa.js'%}"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="sweetalert2.all.min.js"></script>
    <script src="alerta-exito"></script>
    <script>
        if ( window.history.replaceState ) {
            window.history.replaceState( null, null, window.location.href );
        }
    </script>

    <script>
        function validateFileType(){
            var file = document.getElementById("file").value;
            var idxDot = file.lastIndexOf(".") + 1;
            var extFile = file.substr(idxDot, file.length).toLowerCase();
            if (extFile=="jpg" || extFile=="jpeg" || extFile=="png"){
                //TO DO
            }else{
                alert("Only jpg/jpeg and png files are allowed!");
            }   
        }
    </script>
</body>

</html>
{%endblock%}
