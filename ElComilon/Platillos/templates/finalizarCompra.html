{% extends "HeaderFooter/base.html"%}
{% load static %}

{% block content%}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/estiloPedido.css' %}">
    <title>Document</title>
</head>
<body>
    {% load humanize %}
    <section>
        {% if request.session.carrito.items %}        
        <form method="POST" action="{% url 'guardar' %}" class="formularioPedido sombra">
            {% csrf_token %}
            <fieldset>
                <div class="imagen-campos">
                    <div class="imagen">
                        <img src="{% static 'img/imagenPedido.png' %}" alt="">
                    </div>
    
                    <div class="camposPedido">
                        <legend>Termina de armar tu pedido</legend>
                        <div class="contenedor-campos">
                            <div class="form-check form-switch inputs check campo titulos-campo">
                                <label class="form-check-label" for="flexSwitchCheckDefault">Retiro en local</label>
                                <input class="form-check-input" type="checkbox" name="Domicilio" role="switch" id="checkbox">
                                <label class="form-check-label" for="flexSwitchCheckDefault">Entrega a domicilio</label>
                            </div>
                            <div class="campo titulos-campo">
                                <div class="title">
                                    <label class="">Dirección</label>
                                    <hr class="separador">
                                </div>
                                <input class="input-text" id="Direccion" name="Direccion" type="text" placeholder="Ingresa tu dirección" value="{{ cliente.direccion }}" disabled>
                            </div>
        
                            <div class="campo">
                                <div class="title titulos-campo">
                                    <label>Detalles del pedido</label>
                                    <hr class="separador">
                                </div>
                                {% for key ,value in request.session.carrito.items %}
                                <div class="platillo-completo ">
                                    <div class="platillos ">
                                        <label >{{value.nombre | title}}</label>
                                        <div class="agregar-restar">
                                            <a href="{% url 'restar_producto_fin' value.idplatillo %}" class=""> <img src="{% static 'img/restar.png' %}" alt=""> </a>
                                            {{ value.cantidad}}
                                            <a href="{% url 'agregar_producto_fin' value.idplatillo %}" class=""> <img src="{% static 'img/agregar.png' %}" alt=""> </a>                
                                        </div>
                                    </div>
                                    <div> <label class="ingredientes">{{value.ingredientes | title}}</label></div>
                                   
                                    <div class="valor-unitario"><label for="">$ {{value.acumulado}}</label></div>
                                    
                                    
                                </div>                                    
                                    {% endfor %}                                
                            </div>
        
                            <div class="campo">
                                <div class="title titulos-campo">
                                    <label class="subtitle-small">Fecha y hora de entrega</label>
                                    <hr class="separador">
                                </div>
                                <div class="hora-fecha">
                                    <input class="input-text" id="fechaActual" name="Fecha" type="date" placeholder="Fecha Entrega">
                                    <input class="input-text" id="fechaActual" name="Hora" type="time" placeholder="Hora Entrega">
                                </div>                           
                                
                                
                            </div>

                            <div class="campo">
                                <div class="title titulos-campo">
                                    <label>Resumen</label>
                                    <hr class="separador">                                    
                                </div>
                                <div class="subtotal">
                                    <div class="platillos">
                                        <label class="subtotal" for="">Subtotal:</label>
                                        <label class="subtotal" for="">$ {{total_carrito | intcomma}}</label>  
                                    </div>
                                    <div class="platillos">
                                        <label class="subtotal" for="">Delivery:</label>
                                        <label class="subtotal" for="">Gratis</label>  
                                    </div>

                                </div>
                                                              
                            </div>
                            <div class="campo btn-finalizar">
                                <button type="submit" class="btn btn-color">Confirmar pedido</button>
                                <!-- <a type="submit" id="enviar" class="btn btn-color" href="{% url 'guardar' %}">Confirmar pedido</a> -->
                            </div>
                        </div>
        
                    </div>
                </div>

            </fieldset>
        </form>

  
    {% else %}
    <div class="carro-vacio">
        <div>
            <img src="{% static 'img/sad-cart.png' %}" alt="">
        </div>
        <div>
            <label for="" class="label-carro-vacio">
                UPS! No tienes platos en tu carrito. Te invitamos a revisar nuestro <a class="catalogo-ref" href="/platillos">catálogo.</a>
            </label>
        </div>
    </div>

        {% endif %}
    </section>
    <script type="text/javascript">
        document.getElementById('checkbox').onchange = function() {
    document.getElementById('Direccion').disabled = !this.checked;
};
    </script>

    <script src="{% static 'app/fecha.js' %}"></script>
    
</body>
</html>
{%endblock%}